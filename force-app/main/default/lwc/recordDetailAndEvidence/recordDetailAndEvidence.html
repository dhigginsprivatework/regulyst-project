<template>
    <section class="sticky-panel">
        <lightning-card title="ðŸ“‹ Selected Record Details" icon-name="standard:record">
            <template if:true={recordId}>
                <lightning-record-view-form record-id={recordId} object-api-name={objectApiName}>
                    <div class="slds-box slds-theme_default slds-p-around_medium">
                        <div class="slds-text-title slds-m-bottom_small">Record Information</div>
                        <div class="slds-grid slds-wrap slds-gutters_small">
                            <template for:each={fieldsToDisplay} for:item="field">
                                <div key={field} class="slds-col slds-size_1-of-1">
                                    <lightning-output-field field-name={field}></lightning-output-field>
                                </div>
                            </template>
                        </div>
                    </div>
                </lightning-record-view-form>

                <div class="slds-box slds-theme_default slds-m-top_medium slds-p-around_medium">
                    <div class="slds-text-title slds-m-bottom_small">ðŸ“Ž Add Evidence</div>
                    <lightning-input
                        label="Evidence Description"
                        value={evidenceDescription}
                        onchange={handleEvidenceChange}>
                    </lightning-input>

                    <div class="slds-m-top_small">
                        <label class="slds-form-element__label" for="file-upload">Upload Files</label>
                        <input type="file" id="file-upload" multiple onchange={handleFileChange} />
                    </div>

                    <lightning-button
                        label="Save Evidence & Upload Files"
                        variant="brand"
                        onclick={handleSaveEvidenceAndUpload}
                        class="slds-m-top_small">
                    </lightning-button>
                </div>
            </template>

            <template if:false={recordId}>
                <p class="slds-p-around_medium slds-text-color_weak">
                    Select a Clause, Control, or Requirement to view details.
                </p>
            </template>
        </lightning-card>
    </section>
</template>
