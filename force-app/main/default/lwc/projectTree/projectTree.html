<template>
    <lightning-card title="ðŸ“Š Project Requirements Overview" icon-name="custom:custom63">
        <div class="slds-p-horizontal_medium slds-p-vertical_small">
            <lightning-input
                type="search"
                label=""
                value={searchTerm}
                onchange={handleSearch}
                class="slds-m-bottom_small"
                placeholder="Search Clauses/Control Domains, Controls, Requirements..."
            ></lightning-input>

            <template if:true={isLoading}>
                <lightning-spinner alternative-text="Loading tree..." size="medium"></lightning-spinner>
            </template>

            <template if:true={filteredTreeData}>
                <div class="slds-m-bottom_small slds-align_absolute-center">
                    <lightning-button-group>
                        <lightning-button label="Expand All" onclick={expandAll}></lightning-button>
                        <lightning-button label="Collapse All" onclick={collapseAll}></lightning-button>
                    </lightning-button-group>
                </div>

                <lightning-tree
                    items={filteredTreeData}
                    onselect={handleSelect}
                    header=""
                    class="custom-tree"
                ></lightning-tree>
            </template>

            <template if:false={filteredTreeData}>
                <div class="slds-text-body_regular slds-text-color_weak">
                    No project data available.
                </div>
            </template>
        </div>
    </lightning-card>
</template>
