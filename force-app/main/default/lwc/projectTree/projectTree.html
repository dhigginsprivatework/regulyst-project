<template>
    <lightning-card title="ðŸ“Š Project Requirements Overview" icon-name="custom:custom63">
        <div class="tree-container">
            <lightning-input
                type="search"
                value={searchTerm}
                onchange={handleSearch}
                class="search-input"
                placeholder="Search Clauses/Control Domains, Controls, Requirements..."
            ></lightning-input>

            <template if:true={isLoading}>
                <lightning-spinner alternative-text="Loading tree..." size="medium"></lightning-spinner>
            </template>

            <template if:true={filteredTreeData}>
                <div class="button-bar right-align">
                    <lightning-button-group>
                        <lightning-button label="Expand All" onclick={expandAll}></lightning-button>
                        <lightning-button label="Collapse All" onclick={collapseAll}></lightning-button>
                    </lightning-button-group>
                </div>

                <lightning-tree
                    items={filteredTreeData}
                    onselect={handleSelect}
                    class="custom-tree"
                ></lightning-tree>
            </template>

            <template if:false={filteredTreeData}>
                <div class="no-data">No project data available.</div>
            </template>
        </div>
    </lightning-card>
</template>
